<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pal Library - Finance Books</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        /* Custom Colors (Dark Mode Defaults) - Copied from homepage */
        :root {
            --primary-green: #22c55e;
            /* Brand Green */
            --primary-green-dark: #16a34a;
            /* Darker Green for hover */
            --accent-orange: #f97316;
            /* Brand Orange */
            --accent-orange-dark: #ea580c;
            /* Darker Orange for hover */
            --light-white: #ffffff;
            /* Explicitly define white for all button text */

            /* Dark Mode Specific Variables */
            --bg-body: #0f172a;
            /* slate-900 */
            --bg-section-alt: #1e293b;
            /* slate-800 for even sections */
            --bg-card: #0f172a;
            /* slate-900 for cards in odd sections */
            --bg-card-alt: #1e293b;
            /* slate-800 for cards in even sections */
            --text-heading: #ffffff;
            /* white */
            --text-body: #e2e8f0;
            /* light slate text */
            --text-medium: #94a3b8;
            /* slate-400 */
            --text-input: #334155;
            /* slate-700, for input text in light background */
            --text-input-placeholder: #64748b;
            /* slate-500 */
            --border-color: rgba(255, 255, 255, 0.08);
            /* Light border for dark cards */
            --header-bg-scrolled: #0f172a;
            /* Opaque dark-blue-black when scrolled */
            --header-box-shadow-scrolled: rgba(0, 0, 0, 0.5);
            --card-box-shadow: rgba(0, 0, 0, 0.3);
            --card-box-shadow-hover: rgba(0, 0, 0, 0.4);
            --overlay-bg: rgba(15, 23, 42, 0.6);
            /* Slightly less opaque overlay */
            --dropdown-bg: #0f172a;
            /* Dark background for dropdown */
            --dropdown-hover-bg: #1e293b;
            /* Lighter dark-blue-black on dropdown hover */
            --cookie-banner-bg: rgba(0, 0, 0, 0.8);
            /* Semi-transparent black for cookie banner */
            --cookie-banner-text: #ffffff;
        }

        /* Light Mode Overrides - Copied from homepage */
        body.light-mode {
            /* Primary Green for Light Mode (Darker) */
            --primary-green: #168a44;
            /* Darker green for light mode */
            --primary-green-dark: #0f6a31;
            /* Even darker green for hover in light mode */

            /* Backgrounds */
            --bg-body: #f8fafc;
            /* slate-50 */
            --bg-section-alt: #ffffff;
            /* white for even sections */
            --bg-card: #f8fafc;
            /* slate-50 for cards in odd sections */
            --bg-card-alt: #ffffff;
            /* white for cards in even sections */

            /* Text Colors */
            --text-heading: #1e293b;
            /* dark slate */
            --text-body: #475569;
            /* slate-600 */
            --text-medium: #64748b;
            /* slate-500 */
            --text-input: #475569;
            /* slate-600 */
            --text-input-placeholder: #94a3b8;
            /* slate-400 */
            --border-color: rgba(0, 0, 0, 0.1);
            /* Darker border for light cards */

            /* Header Specific Overrides for Light Mode */
            --header-bg-scrolled: #ffffff;
            /* Opaque white on scroll */
            --header-box-shadow-scrolled: rgba(0, 0, 0, 0.15);

            /* Card Specific Overrides for Light Mode */
            --card-box-shadow: rgba(0, 0, 0, 0.1);
            --card-box-shadow-hover: rgba(0, 0, 0, 0.2);

            /* Overlay for hero background (lighter for contrast in light mode) */
            --overlay-bg: rgba(255, 255, 255, 0.7);

            /* Dropdown background in light mode */
            --dropdown-bg: #ffffff;
            --dropdown-hover-bg: #f1f5f9;
            /* slate-100 */
            --cookie-banner-bg: rgba(255, 255, 255, 0.9);
            /* Semi-transparent white for cookie banner */
            --cookie-banner-text: #1e293b;
        }

        /* Base Styles - Copied from homepage */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: var(--bg-body);
            color: var(--text-body);
            line-height: 1.6;
            min-height: 100vh;
            /* Adjusted for single page */
            transition: background-color 0.3s ease, color 0.3s ease;
            /* Smooth theme transition */
            color-scheme: dark;
            /* Default color scheme for browser elements */
        }

        body.light-mode {
            color-scheme: light;
            /* Light color scheme for browser elements */
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            color: var(--text-heading);
            margin-top: 0;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* --- Header --- Copied from homepage */
        .top-section-wrapper {
            /* This wrapper is for the hero background, not needed here */
            position: relative;
            background-color: var(--bg-body);
            /* Use body background for consistency */
            display: flex;
            flex-direction: column;
        }

        .background-overlay {
            /* Not needed on this page */
            display: none;
        }

        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem 0;
            background-color: var(--bg-body);
            /* Solid background by default */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            /* Always have a shadow */
            transition: background-color 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, transform 0.3s ease;
            -webkit-backdrop-filter: blur(0);
            backdrop-filter: blur(0);
        }

        body.light-mode .header {
            background-color: var(--bg-section-alt);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Header states when scrolled (removed hide/show logic as it's a shorter page) */
        .header.scrolled-visible,
        .header.scrolled-hidden {
            transform: translateY(0);
            /* Always visible */
            background-color: var(--header-bg-scrolled);
            box-shadow: 0 6px 20px var(--header-box-shadow-scrolled);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
        }

        /* Ensure header is always visible on this page */
        .header {
            transform: translateY(0) !important;
        }


        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .logo {
            width: 200px;
            max-height: 100px;
        }


        .nav-links {
            display: none;
            /* Hidden by default on small screens */
            gap: 1.5rem;
            align-items: center;
        }

        .nav-links a,
        .login-btn {
            color: var(--text-heading);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary-green);
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-btn {
            cursor: pointer;
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 101;
        }

        .dropdown-btn .arrow-icon {
            font-size: 0.7em;
            margin-left: 0.5em;
            transition: transform 0.2s ease;
            display: inline-block;
        }

        .dropdown:hover .dropdown-btn .arrow-icon {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--dropdown-bg);
            min-width: 200px;
            box-shadow: 0 8px 16px 0px rgba(0, 0, 0, 0.4);
            z-index: 100;
            border-radius: 8px;
            padding: 0.5rem 0;
            top: calc(100% + 5px);
            left: 50%;
            transform: translateX(-50%);
            border: 1px solid var(--border-color);
            transition: background-color 0.3s ease;
        }

        .dropdown-content a {
            color: var(--text-body);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .dropdown-content a:hover {
            background-color: var(--dropdown-hover-bg);
            color: var(--primary-green);
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .login-btn {
            background-color: var(--accent-orange);
            color: var(--light-white);
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .login-btn:hover {
            background-color: var(--accent-orange-dark);
            transform: translateY(-1px);
        }

        .menu-toggle {
            display: block;
            background: none;
            border: none;
            color: var(--text-heading);
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-heading);
            transition: color 0.3s ease;
            padding: 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .theme-toggle:hover {
            color: var(--primary-green);
        }

        /* Mobile navigation overlay - Copied from homepage */
        .mobile-nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-body);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out, background-color 0.3s ease;
        }

        .mobile-nav-overlay.open {
            transform: translateX(0);
        }

        .mobile-nav-overlay a {
            color: var(--text-heading);
            font-size: 1.8rem;
            margin: 1rem 0;
            text-decoration: none;
            display: block;
            transition: color 0.3s ease;
        }

        .mobile-nav-overlay a:hover {
            color: var(--primary-green);
        }

        .close-menu-btn {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: var(--text-heading);
            font-size: 3rem;
            cursor: pointer;
        }

        .mobile-nav-overlay .dropdown-content {
            position: static;
            display: none;
            box-shadow: none;
            background-color: transparent;
            width: auto;
            min-width: unset;
            margin-top: 0;
            transform: none;
            border: none;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }

        .mobile-nav-overlay .dropdown-content.open-mobile-dropdown {
            display: block;
            max-height: 500px;
            opacity: 1;
        }

        .mobile-nav-overlay .dropdown-content a {
            font-size: 1.5rem;
            padding: 0.5rem 0;
            text-align: center;
            color: var(--text-body);
        }

        /* --- Main Content Section for Finance Books --- */
        .finance-books-main {
            padding: 4rem 0;
            background-color: var(--bg-body);
            min-height: calc(100vh - 150px);
            /* Adjust height to account for header/footer */
        }

        .finance-books-main h2 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary-green);
            text-align: center;
            margin-bottom: 2.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }

        /* Search Bar Styling */
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 0 1rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-container input[type="text"] {
            flex-grow: 1;
            padding: 0.8rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-card);
            /* Use card background for input */
            color: var(--text-body);
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .search-container input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
        }

        .search-container input::placeholder {
            color: var(--text-medium);
        }

        .search-container button {
            background-color: var(--primary-green);
            color: var(--light-white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        .search-container button:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-2px);
        }

        .search-container button.clear-btn {
            background-color: var(--accent-orange);
        }

        .search-container button.clear-btn:hover {
            background-color: var(--accent-orange-dark);
        }


        .books-grid {
            /* New grid for this page */
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            /* Responsive grid */
            gap: 2rem;
            /* Space between cards */
            justify-content: center;
            /* Center items in grid */
        }

        .book-card {
            /* Re-using and adapting book-card styles from homepage */
            background-color: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 6px 20px var(--card-box-shadow);
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            height: 335px;
            /* Fixed height for consistency */
        }

        body.light-mode .book-card {
            background-color: var(--bg-card-alt);
            /* Use light mode card background */
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px var(--card-box-shadow-hover);
        }

        .book-thumbnail {
            width: 170px;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        body.light-mode .book-thumbnail {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .book-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-heading);
            margin-bottom: 0.3rem;
        }

        .book-card .author {
            font-style: italic;
            color: var(--text-medium);
            margin-bottom: 0.6rem;
        }

        .book-action-btn {
            display: block;
            width: 80%;
            margin-top: auto;
            background-color: var(--primary-green);
            color: var(--light-white);
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .book-action-btn:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        /* --- Footer --- Copied from homepage */
        .footer {
            background-color: var(--bg-section-alt);
            color: var(--text-medium);
            padding: 2.5rem 0;
            text-align: center;
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .footer p {
            margin: 0;
            padding: 0.5rem 0;
        }

        .footer .disclaimer {
            font-size: 0.85rem;
            color: var(--text-body);
            margin-top: 1rem;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        /* --- Cookie Consent Banner --- Copied from homepage */
        .cookie-consent-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--cookie-banner-bg);
            color: var(--cookie-banner-text);
            padding: 1rem;
            text-align: center;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(100%);
            transition: transform 0.5s ease-out, background-color 0.3s ease, color 0.3s ease;
        }

        .cookie-consent-banner.show {
            transform: translateY(0);
        }

        .cookie-consent-banner p {
            margin: 0;
            max-width: 800px;
        }

        .cookie-consent-banner button {
            background-color: var(--primary-green);
            color: var(--light-white);
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .cookie-consent-banner button:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-1px);
        }

        /* --- Responsive Design --- Copied from homepage and adapted */
        @media (max-width: 767px) {
            .cookie-consent-banner {
                flex-direction: column;
            }

            .cookie-consent-banner p {
                font-size: 0.9rem;
            }

            .search-container {
                flex-direction: column;
                gap: 0.8rem;
            }

            .search-container input[type="text"],
            .search-container button {
                width: 100%;
            }
        }

        @media (min-width: 768px) {
            .navbar {
                justify-content: space-between;
            }

            .nav-links {
                display: flex;
            }

            .menu-toggle {
                display: none;
            }

            .navbar .theme-toggle {
                order: 3;
                margin-left: 1rem;
            }

            .navbar .login-btn {
                order: 4;
            }
        }
    </style>
</head>

<body>
    <div class="top-section-wrapper">
        <div class="background-overlay"></div>

        <!--====================== HEADER ====================-->
        <header class="header">
            <div class="container navbar">
                <div>
                    <img src="./img/logo1.png" class="logo" alt="">
                </div>
                <nav class="nav-links">
                    <a href="/">Home</a>
                    <div class="dropdown">
                        <a href="#categories-section" class="dropdown-btn">Categories <span
                                class="arrow-icon">▼</span></a>
                        <div class="dropdown-content">
                            <a href="./christian.html">Christian Books</a>
                            <a href="./academic.html">Academic Books</a>
                            <a href="./research_thesis.html">Research & Project Papers</a>
                            <a href="./past_questions.html">Past Questions</a>
                            <a href="./finance.html">Finance Books</a>
                            <a href="./love.html">Relationship Books</a>
                            <a href="./life.html">Life Books</a>
                        </div>
                    </div>
                    <a href="./about.html">About Us</a>
                    <a href="./support.html">Support</a>
                </nav>
                <button id="theme-toggle" class="theme-toggle">☀️</button>
                <a href="./login.html" class="login-btn">Login</a>
                <button class="menu-toggle" id="menuToggle">&#9776;</button>
            </div>
        </header>


        <!-- ====================================
         ================ MOBILE MENU ============================== -->
        <div class="mobile-nav-overlay" id="mobileNavOverlay">
            <button class="close-menu-btn" id="closeMenuBtn">&times;</button>
            <nav class="mobile-nav-links">
                <a href="/">Home</a>
                <div class="dropdown">
                    <a href="#categories-section" class="dropdown-btn">Categories <span class="arrow-icon">▼</span></a>
                    <div class="dropdown-content">
                        <a href="./christian.html">Christian Books</a>
                        <a href="./academic.html">Academic Books</a>
                        <a href="./research_thesis.html">Research Papers</a>
                        <a href="./past_questions.html">Project Thesis</a>
                        <a href="./finance.html">Finance Books</a>
                        <a href="./love.html">Relationship Books</a>
                        <a href="./life.html">Life Books</a>
                    </div>
                </div>
                <a href="./about.html">About Us</a>
                <a href="./support.html">Support</a>
                <a href="./login.html" class="login-btn">Login</a>
                <button id="mobile-theme-toggle" class="theme-toggle">☀️</button>
            </nav>
        </div>



    </div> <!-- End .top-section-wrapper -->

    <!-- Main Content for Finance Books -->
    <main class="finance-books-main">
        <div class="container">
            <h2>Our Finance Books Collection</h2>

            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search by title or author...">
                <button id="searchButton">Search</button>
                <button id="clearSearchButton" class="clear-btn">Clear</button>
            </div>

            <div id="booksGrid" class="books-grid">
                <!-- Books will be dynamically loaded here by JavaScript -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Pal Library. All rights reserved. Connecting Ghanaian knowledge to the world.</p>
            <p class="disclaimer">
                Disclaimer: Pal Library directly hosts course materials and academic resources from our partner
                universities in Ghana.
                For other book categories (e.g., Christian, Finance, Relationship, Life Books), we provide summaries and
                link directly to their respective legal storage on the internet (e.g., Amazon, Internet Archive).
                We do not host content from non-partner sources to ensure strict adherence to copyright laws and to
                maintain academic integrity.
            </p>
        </div>
    </footer>

    <!-- Cookie Consent Banner HTML -->
    <div class="cookie-consent-banner" id="cookieConsentBanner">
        <p>This website uses cookies to ensure you get the best experience on our website. By continuing to use this
            site, you agree to our use of cookies.</p>
        <button id="acceptCookiesBtn">Accept Cookies</button>
    </div>

    <script>
        // --- Finance Books Data Array ---
        const financeBooks = [
            {
                title: "The Intelligent Investor",
                author: "Benjamin Graham",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Intelligent+Investor",
                link: "#" // Placeholder link
            },
            {
                title: "Rich Dad Poor Dad",
                author: "Robert Kiyosaki",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Rich+Dad+Poor+Dad",
                link: "#"
            },
            {
                title: "The Psychology of Money",
                author: "Morgan Housel",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Psychology+of+Money",
                link: "#"
            },
            {
                title: "Your Money or Your Life",
                author: "Vicki Robin",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Your+Money+or+Your+Life",
                link: "#"
            },
            {
                title: "A Random Walk Down Wall Street",
                author: "Burton Malkiel",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Random+Walk",
                link: "#"
            },
            {
                title: "The Millionaire Next Door",
                author: "Thomas J. Stanley & William D. Danko",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Millionaire+Next+Door",
                link: "#"
            },
            {
                title: "Think and Grow Rich",
                author: "Napoleon Hill",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Think+Grow+Rich",
                link: "#"
            },
            {
                title: "The Total Money Makeover",
                author: "Dave Ramsey",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Total+Money+Makeover",
                link: "#"
            },
            {
                title: "I Will Teach You To Be Rich",
                author: "Ramit Sethi",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Teach+You+Rich",
                link: "#"
            },
            {
                title: "Common Stocks and Uncommon Profits",
                author: "Philip A. Fisher",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Common+Stocks",
                link: "#"
            },
            {
                title: "Security Analysis",
                author: "Benjamin Graham & David Dodd",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Security+Analysis",
                link: "#"
            },
            {
                title: "The Little Book of Common Sense Investing",
                author: "John Bogle",
                image: "https://placehold.co/170x180/f97316/ffffff?text=Little+Book+Investing",
                link: "#"
            }
        ];

        // --- Function to Load Books into the Grid ---
        function loadBooks(booksToDisplay) {
            const booksGridContainer = document.getElementById('booksGrid');
            if (!booksGridContainer) return;

            booksGridContainer.innerHTML = ''; // Clear existing content

            if (booksToDisplay.length === 0) {
                booksGridContainer.innerHTML = '<p style="text-align: center; width: 100%; color: var(--text-medium);">No books found matching your search.</p>';
                return;
            }

            booksToDisplay.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.classList.add('book-card');

                bookCard.innerHTML = `
                    <img src="${book.image}" alt="${book.title} Cover" class="book-thumbnail">
                    <h3>${book.title}</h3>
                    <p class="author">${book.author}</p>
                    <a href="${book.link}" class="book-action-btn">View Book</a>
                `;
                booksGridContainer.appendChild(bookCard);
            });

            // Add event listeners for book action buttons
            booksGridContainer.querySelectorAll('.book-action-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const bookTitle = button.closest('.book-card').querySelector('h3').textContent;
                    alert(`Viewing "${bookTitle}" functionality will be available soon!`);
                });
            });
        }

        // --- Search Functionality ---
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const clearSearchButton = document.getElementById('clearSearchButton');

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            let filteredBooks = [];

            if (query === '') {
                filteredBooks = financeBooks; // Show all books if search query is empty
            } else {
                filteredBooks = financeBooks.filter(book => {
                    const titleMatch = book.title.toLowerCase().includes(query);
                    const authorMatch = book.author.toLowerCase().includes(query);
                    return titleMatch || authorMatch;
                });
            }
            loadBooks(filteredBooks); // Load the filtered (or all) books
        }

        if (searchButton) {
            searchButton.addEventListener('click', performSearch);
        }

        if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        if (clearSearchButton) {
            clearSearchButton.addEventListener('click', () => {
                searchInput.value = ''; // Clear the input field
                performSearch(); // Reload all books
            });
        }


        // --- Theme Toggle Functionality ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const mobileThemeToggleBtn = document.getElementById('mobile-theme-toggle');
        const body = document.body;

        const prefersLightMode = window.matchMedia('(prefers-color-scheme: light)');

        function setTheme(isLight) {
            if (isLight) {
                body.classList.add('light-mode');
                themeToggleBtn.textContent = '🌙'; // Moon icon for dark mode toggle
                mobileThemeToggleBtn.textContent = '🌙';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                themeToggleBtn.textContent = '☀️'; // Sun icon for light mode toggle
                mobileThemeToggleBtn.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize theme based on localStorage or system preference
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                setTheme(savedTheme === 'light');
            } else {
                setTheme(false); // Force dark mode if no preference is saved
            }
        }

        // Listen for system theme changes
        prefersLightMode.addEventListener('change', (event) => {
            // Only update if no explicit user preference is saved
            if (!localStorage.getItem('theme')) {
                setTheme(event.matches);
            }
        });

        // Toggle theme on button click
        themeToggleBtn.addEventListener('click', () => {
            setTheme(!body.classList.contains('light-mode'));
        });
        mobileThemeToggleBtn.addEventListener('click', () => {
            setTheme(!body.classList.contains('light-mode'));
        });

        // --- Smooth Scrolling for navigation links (adapted for this page) ---
        document.querySelectorAll('nav a[href^="index.html#"], nav a[href="christian-books-page.html"], nav a[href="finance-books-page.html"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                // If it's a link to the current page, allow default behavior
                if (this.getAttribute('href') === 'finance-books-page.html' || this.getAttribute('href').startsWith('#')) {
                    // For dropdowns on mobile, toggle the dropdown
                    if (this.classList.contains('dropdown-btn') && window.innerWidth < 768) {
                        e.preventDefault();
                        const dropdownContent = this.nextElementSibling;
                        const arrowIcon = this.querySelector('.arrow-icon');
                        if (dropdownContent) {
                            dropdownContent.classList.toggle('open-mobile-dropdown');
                            if (arrowIcon) {
                                arrowIcon.style.transform = dropdownContent.classList.contains('open-mobile-dropdown') ? 'rotate(180deg)' : 'rotate(0deg)';
                            }
                        }
                        return; // Don't proceed with page scroll for dropdown toggle
                    }
                    return; // Allow default navigation for direct links on this page or internal anchors
                }

                // For links back to homepage with specific sections
                e.preventDefault();
                const targetHref = this.getAttribute('href');
                window.location.href = targetHref; // Redirect to homepage with hash
            });
        });

        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menuToggle');
        const mobileNavOverlay = document.getElementById('mobileNavOverlay');
        const closeMenuBtn = document.getElementById('closeMenuBtn');

        if (menuToggle && mobileNavOverlay && closeMenuBtn) {
            menuToggle.addEventListener('click', () => {
                mobileNavOverlay.classList.add('open');
                mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                    dropdown.classList.remove('open-mobile-dropdown');
                    const btn = dropdown.previousElementSibling;
                    const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                    if (arrowIcon) {
                        arrowIcon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            closeMenuBtn.addEventListener('click', () => {
                mobileNavOverlay.classList.remove('open');
                mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                    dropdown.classList.remove('open-mobile-dropdown');
                    const btn = dropdown.previousElementSibling;
                    const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                    if (arrowIcon) {
                        arrowIcon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            mobileNavOverlay.querySelectorAll('.mobile-nav-links a:not(.dropdown-btn)').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNavOverlay.classList.remove('open');
                    mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                        dropdown.classList.remove('open-mobile-dropdown');
                        const btn = dropdown.previousElementSibling;
                        const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                        if (arrowIcon) {
                            arrowIcon.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            });
        }

        // --- Header show/hide on scroll direction (simplified for this page) ---
        const header = document.querySelector('.header');
        // On this page, the header will always be visible, so no complex scroll logic needed.
        // The `header` element will automatically pick up the `background-color` and `box-shadow` from its default style.

        // --- Cookie Consent Banner Logic ---
        const cookieBanner = document.getElementById('cookieConsentBanner');
        const acceptCookiesBtn = document.getElementById('acceptCookiesBtn');
        const cookieConsentKey = 'palLibraryCookieConsent';

        function showCookieBanner() {
            if (!localStorage.getItem(cookieConsentKey)) {
                cookieBanner.classList.add('show');
            }
        }

        function acceptCookies() {
            localStorage.setItem(cookieConsentKey, 'true');
            cookieBanner.classList.remove('show');
        }

        if (acceptCookiesBtn) {
            acceptCookiesBtn.addEventListener('click', acceptCookies);
        }

        // --- Placeholder for Login Button ---
        document.querySelectorAll('.login-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                alert('Login functionality will be available soon!');
            });
        });

        // Initial load of books and theme
        document.addEventListener('DOMContentLoaded', () => {
            initializeTheme();
            loadBooks(financeBooks); // Load all books initially
        });
    </script>
</body>

</html>