<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pal Library - Christian Books</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        /* Custom Colors (Dark Mode Defaults) - Copied from homepage */
        :root {
            --primary-green: #22c55e;
            --primary-green-dark: #16a34a;
            --accent-orange: #f97316;
            --accent-orange-dark: #ea580c;
            --light-white: #ffffff;
            /* Explicitly define white for all button text */

            /* Dark Mode Specific Variables */
            --bg-body: #0f172a;
            --bg-section-alt: #1e293b;
            --bg-card: #0f172a;
            --bg-card-alt: #1e293b;
            --text-heading: #ffffff;
            --text-body: #e2e8f0;
            --text-medium: #94a3b8;
            --text-input: #334155;
            --text-input-placeholder: #64748b;
            --border-color: rgba(255, 255, 255, 0.08);
            --header-bg-scrolled: #0f172a;
            --header-box-shadow-scrolled: rgba(0, 0, 0, 0.5);
            --card-box-shadow: rgba(0, 0, 0, 0.3);
            --card-box-shadow-hover: rgba(0, 0, 0, 0.4);
            --overlay-bg: rgba(15, 23, 42, 0.6);
            --dropdown-bg: #0f172a;
            --dropdown-hover-bg: #1e293b;
            --cookie-banner-bg: rgba(0, 0, 0, 0.8);
            --cookie-banner-text: #ffffff;
        }


        /* Light Mode Overrides - Copied from homepage */
        body.light-mode {
            --primary-green: #168a44;
            --primary-green-dark: #0f6a31;



            /* Backgrounds */
            --bg-body: #f8fafc;
            --bg-section-alt: #ffffff;
            --bg-card: #f8fafc;
            --bg-card-alt: #ffffff;


            /* Text Colors */
            --text-heading: #1e293b;
            --text-body: #475569;
            --text-medium: #64748b;
            --text-input: #475569;
            --text-input-placeholder: #94a3b8;
            --border-color: rgba(0, 0, 0, 0.1);


            /* Header Specific Overrides for Light Mode */
            --header-bg-scrolled: #ffffff;
            --header-box-shadow-scrolled: rgba(0, 0, 0, 0.15);



            /* Card Specific Overrides for Light Mode */
            --card-box-shadow: rgba(0, 0, 0, 0.1);
            --card-box-shadow-hover: rgba(0, 0, 0, 0.2);

            --overlay-bg: rgba(255, 255, 255, 0.7);

            /* DROPDOWN*/
            --dropdown-bg: #ffffff;
            --dropdown-hover-bg: #f1f5f9;
            --cookie-banner-bg: rgba(255, 255, 255, 0.9);
            --cookie-banner-text: #1e293b;
        }


        /* BASE STYLES */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: var(--bg-body);
            color: var(--text-body);
            line-height: 1.6;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
            color-scheme: dark;
        }

        body.light-mode {
            color-scheme: light;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            color: var(--text-heading);
            margin-top: 0;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }



        /* --- ===========================
        ==========HEADERS =======================*/
        .top-section-wrapper {
            position: relative;
            background-color: var(--bg-body);
            display: flex;
            flex-direction: column;
        }

        .background-overlay {
            display: none;
        }

        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem 0;
            background-color: var(--bg-body);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, transform 0.3s ease;
            -webkit-backdrop-filter: blur(0);
            backdrop-filter: blur(0);
        }

        body.light-mode .header {
            background-color: var(--bg-section-alt);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* SCROLLED HEADER */
        .header.scrolled-visible,
        .header.scrolled-hidden {
            transform: translateY(0);
            background-color: var(--header-bg-scrolled);
            box-shadow: 0 6px 20px var(--header-box-shadow-scrolled);
            -webkit-backdrop-filter: blur(8PX);
            backdrop-filter: blur(8px);
        }


        /* HEADER VISIBILITY */
        .header {
            transform: translateY(0) !important;
        }


        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .logo {
            width: 200px;
            max-height: 100px;
        }


        .nav-links {
            display: none;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-links a,
        .login-btn {
            color: var(--text-heading);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary-green);
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-btn {
            cursor: pointer;
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 101;
        }

        .dropdown-btn .arrow-icon {
            font-size: 0.7em;
            margin-left: 0.5em;
            transition: transform 0.2s ease;
            display: inline-block;
        }

        .dropdown:hover .dropdown-btn .arrow-icon {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--dropdown-bg);
            min-width: 200px;
            box-shadow: 0 8px 16px 0px rgba(0, 0, 0, 0.4);
            z-index: 100;
            border-radius: 8px;
            padding: 0.5rem 0;
            top: calc(100% + 5px);
            left: 50%;
            transform: translateX(-50%);
            border: 1px solid var(--border-color);
            transition: background-color 0.3s ease;
        }

        .dropdown-content a {
            color: var(--text-body);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .dropdown-content a:hover {
            background-color: var(--dropdown-hover-bg);
            color: var(--primary-green);
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .login-btn {
            background-color: var(--accent-orange);
            color: var(--light-white);
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .login-btn:hover {
            background-color: var(--accent-orange-dark);
            transform: translateY(-1px);
        }

        .menu-toggle {
            display: block;
            background: none;
            border: none;
            color: var(--text-heading);
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-heading);
            transition: color 0.3s ease;
            padding: 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .theme-toggle:hover {
            color: var(--primary-green);
        }



        /* MOBILE NAVIGATION */
        .mobile-nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-body);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out, background-color 0.3s ease;
        }

        .mobile-nav-overlay.open {
            transform: translateX(0);
        }

        .mobile-nav-overlay a {
            color: var(--text-heading);
            font-size: 1.8rem;
            margin: 1rem 0;
            text-decoration: none;
            display: block;
            transition: color 0.3s ease;
        }

        .mobile-nav-overlay a:hover {
            color: var(--primary-green);
        }

        .close-menu-btn {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: var(--text-heading);
            font-size: 3rem;
            cursor: pointer;
        }

        .mobile-nav-overlay .dropdown-content {
            position: static;
            display: none;
            box-shadow: none;
            background-color: transparent;
            width: auto;
            min-width: unset;
            margin-top: 0;
            transform: none;
            border: none;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }

        .mobile-nav-overlay .dropdown-content.open-mobile-dropdown {
            display: block;
            max-height: 500px;
            opacity: 1;
        }

        .mobile-nav-overlay .dropdown-content a {
            font-size: 1.5rem;
            padding: 0.5rem 0;
            text-align: center;
            color: var(--text-body);
        }







        /* --- ===============================================================
        ======================================================================
        =============== MAIN CONTENT ================================================
        ===================================================== --- */
        .christian-books-main {
            padding: 4rem 0;
            background-color: var(--bg-body);
            min-height: calc(100vh - 150px);
        }

        .christian-books-main h2 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary-green);
            text-align: center;
            margin-bottom: 2.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }


        /* SEARCH BAR */
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            margin-right: 5px;
            padding: 0 1rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-container input[type="text"] {
            flex-grow: 1;
            padding: 0.8rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-card);
            color: var(--text-body);
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .search-container input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
        }

        .search-container input::placeholder {
            color: var(--text-medium);
        }

        .search-container button {
            background-color: var(--primary-green);
            color: var(--light-white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        .search-container button:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-2px);
        }

        .search-container button.clear-btn {
            background-color: var(--accent-orange);
        }

        .search-container button.clear-btn:hover {
            background-color: var(--accent-orange-dark);
        }


        /*===========================================================
        ==================  BOOKS GRID =================================
        =========================================================*/
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            justify-content: center;
        }

        .book-card {
            background-color: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 6px 20px var(--card-box-shadow);
            padding: 0.5rem 0.5rem 1rem 0.5rem;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            height: 335px;
        }

        body.light-mode .book-card {
            background-color: var(--bg-card-alt);
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px var(--card-box-shadow-hover);
        }

        .book-thumbnail {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        body.light-mode .book-thumbnail {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .book-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-heading);
            margin-bottom: 0.3rem;
        }

        .book-card .author {
            font-style: italic;
            color: var(--text-medium);
            margin-bottom: 0.6rem;
        }

        .book-action-btn {
            display: block;
            width: 80%;
            margin-top: auto;
            background-color: var(--primary-green);
            color: var(--light-white);
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .book-action-btn:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }



        /* ---===============================================================
        ============================================================================
        ========= FOOTER  ================================================================
        ================================================= */
        .footer {
            background-color: var(--bg-section-alt);
            color: var(--text-medium);
            padding: 2.5rem 0;
            text-align: center;
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .footer p {
            margin: 0;
            padding: 0.5rem 0;
        }

        .footer .disclaimer {
            font-size: 0.85rem;
            color: var(--text-body);
            margin-top: 1rem;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }



        /* --- Cookie Consent*/
        .cookie-consent-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--cookie-banner-bg);
            color: var(--cookie-banner-text);
            padding: 1rem;
            text-align: center;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(100%);
            transition: transform 0.5s ease-out, background-color 0.3s ease, color 0.3s ease;
        }

        .cookie-consent-banner.show {
            transform: translateY(0);
        }

        .cookie-consent-banner p {
            margin: 0;
            max-width: 800px;
        }

        .cookie-consent-banner button {
            background-color: var(--primary-green);
            color: var(--light-white);
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .cookie-consent-banner button:hover {
            background-color: var(--primary-green-dark);
            transform: translateY(-1px);
        }




















        /*=========================================================================
        ==========================================================================
        ============== RESPONSIVENESS ====================================================
        ================================================*/
        @media (max-width: 767px) {
            .cookie-consent-banner {
                flex-direction: column;
            }

            .cookie-consent-banner p {
                font-size: 0.9rem;
            }

            .search-container {
                flex-direction: column;
                gap: 0.8rem;
            }

            .search-container input[type="text"],
            .search-container button {
                width: 100%;
            }
        }

        @media (min-width: 768px) {
            .navbar {
                justify-content: space-between;
            }

            .nav-links {
                display: flex;
            }

            .menu-toggle {
                display: none;
            }

            .navbar .theme-toggle {
                order: 3;
                margin-left: 1rem;
            }

            .navbar .login-btn {
                order: 4;
            }
        }
    </style>
</head>





<body>
    <div class="top-section-wrapper">
        <div class="background-overlay"></div>

        <!--====================== HEADER ====================-->
        <header class="header">
            <div class="container navbar">
                <div>
                    <img src="./img/logo1.png" class="logo" alt="">
                </div>
                <nav class="nav-links">
                    <a href="/">Home</a>
                    <div class="dropdown">
                        <a href="#categories-section" class="dropdown-btn">Categories <span
                                class="arrow-icon">▼</span></a>
                        <div class="dropdown-content">
                            <a href="./christian.html">Christian Books</a>
                            <a href="./academic.html">Academic Books</a>
                            <a href="./research_thesis.html">Research & Project Papers</a>
                            <a href="./past_questions.html">Past Questions</a>
                            <a href="./finance.html">Finance Books</a>
                            <a href="./love.html">Relationship Books</a>
                            <a href="./life.html">Life Books</a>
                        </div>
                    </div>
                    <a href="./about.html">About Us</a>
                    <a href="./support.html">Support</a>
                </nav>
                <button id="theme-toggle" class="theme-toggle">☀️</button>
                <a href="./login.html" class="login-btn">Login</a>
                <button class="menu-toggle" id="menuToggle">&#9776;</button>
            </div>
        </header>


        <!-- ====================================
         ================ MOBILE MENU ============================== -->
        <div class="mobile-nav-overlay" id="mobileNavOverlay">
            <button class="close-menu-btn" id="closeMenuBtn">&times;</button>
            <nav class="mobile-nav-links">
                <a href="/">Home</a>
                <div class="dropdown">
                    <a href="#categories-section" class="dropdown-btn">Categories <span class="arrow-icon">▼</span></a>
                    <div class="dropdown-content">
                        <a href="./christian.html">Christian Books</a>
                        <a href="./academic.html">Academic Books</a>
                        <a href="./research_thesis.html">Research Papers</a>
                        <a href="./past_questions.html">Project Thesis</a>
                        <a href="./finance.html">Finance Books</a>
                        <a href="./love.html">Relationship Books</a>
                        <a href="./life.html">Life Books</a>
                    </div>
                </div>
                <a href="./about.html">About Us</a>
                <a href="./support.html">Support</a>
                <a href="./login.html" class="login-btn">Login</a>
                <button id="mobile-theme-toggle" class="theme-toggle">☀️</button>
            </nav>
        </div>

    </div>





    <!-- ================================================================
     =========================================================================
     =========== MAIN CONTENT =================================================
     ============================================================== -->
    <main class="christian-books-main">
        <div class="container">
            <h2>Our Christian Books Collection</h2>

            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search by title or author...">
                <button id="searchButton">Search</button>
                <button id="clearSearchButton" class="clear-btn">Clear</button>
            </div>




            <!-- ============== BOOKS GRID ========================== -->
            <div id="booksGrid" class="books-grid">
                <!-- ====================================================
                 ========================================================
                 ======================== BOOKS LOADING SECTION ====================
                 ============================================================= -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Pal Library. All rights reserved. Connecting Ghanaian knowledge to the world.</p>
            <p class="disclaimer">
                Disclaimer: Pal Library directly hosts course materials and academic resources from our partner
                universities in Ghana.
                For other book categories (e.g., Christian, Finance, Relationship, Life Books), we provide summaries and
                link directly to their respective legal storage on the internet (e.g., Amazon, Internet Archive).
                We do not host content from non-partner sources to ensure strict adherence to copyright laws and to
                maintain academic integrity.
            </p>
        </div>
    </footer>

    <!-- Cookie Consent Banner HTML -->
    <div class="cookie-consent-banner" id="cookieConsentBanner">
        <p>This website uses cookies to ensure you get the best experience on our website. By continuing to use this
            site, you agree to our use of cookies.</p>
        <button id="acceptCookiesBtn">Accept Cookies</button>
    </div>

    <script>
        // --- Christian Books Data Array ---
        const christianBooks = [
            {
                title: "Mere Christianity",
                author: "C.S. Lewis",
                image: "https://m.media-amazon.com/images/I/61hGte+Zj2L.jpg",
                link: "https://harpercollins.co.uk/products/mere-christianity-c-s-lewis-signature-classic-c-s-lewis?variant=40027293941838"
            },
            {
                title: "The Problem of Pain",
                author: "C.S. Lewis",
                image: "https://m.media-amazon.com/images/I/81iqKK67S6L._UF894,1000_QL80_.jpg",
                link: "https://www.amazon.com/Problem-Pain-C-S-Lewis/dp/0060652969"
            },
            {
                title: "The Case for Christ",
                author: "Lee Strobel",
                image: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1448776489i/73186.jpg",
                link: "https://www.goodreads.com/book/show/73186.The_Case_for_Christ"
            },
            {
                title: "Pilgrim's Progress",
                author: "John Bunyan",
                image: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1405982367i/29797.jpg",
                link: "https://document.desiringgod.org/the-pilgrim-s-progress-en.pdf?ts=1446648353"
            },
            {
                title: "God's Generals - the Revivalists",
                author: "Roberts Liardon",
                image: "https://images-na.ssl-images-amazon.com/images/I/815PIFIw7zL._AC_UL600_SR600,600_.jpg",
                link: "https://www.christianbook.com/gods-generals-the-revivalists/roberts-liardon/9781603740258/pd/740258?srsltid=AfmBOopwBTpS7mu6ZB8_G-p-T0idTX6m74-un768DZk3jnKJXoGZBX-d"
            },
            {
                title: "The Cost of Discipleship",
                author: "Dietrich Bonhoeffer",
                image: "https://www.ubuy.com.gh/productimg/?image=aHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFwTTBWR2RUYkwuX1NMMTUwMF8uanBn.jpg",
                link: "https://www.amazon.com/Cost-Discipleship-Dietrich-Bonhoeffer/dp/0684815001#:~:text=The%20Cost%20of%20Discipleship%20is,creative%20sense%20of%20civic%20duty."
            },
            {
                title: "Knowing God",
                author: "J.I. Packer",
                image: "https://www.ivpress.com/Media/Default/Products/A0778.jpg",
                link: "https://www.amazon.com/Knowing-God-J-I-Packer/dp/083081650X"
            },
            {
                title: "Desiring God",
                author: "John Piper",
                image: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1386924844i/213367.jpg",
                link: "https://dwynrhh6bluza.cloudfront.net/website_uploads/documents/e-books/pdfs/desiring-god-1388566181.pdf"
            },
            {
                title: "The Imitation of Christ",
                author: "Thomas à Kempis",
                image: "https://m.media-amazon.com/images/I/51mSUdHfQeL._SY466_.jpg",
                link: "https://www.amazon.com/Imitation-Christ-Thomas-%C3%A0-Kempis/dp/1514694085"
            },
            {
                title: "The School of the Spirit",
                author: "Roberts Liardon",
                image: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1387732189i/1399425.jpg",
                link: "https://www.amazon.com/School-Spirit-Operating-Powerfully-Realm/dp/0884193608"
            },
            {
                title: "The Everlasting Man",
                author: "G.K. Chesterton",
                image: "https://images-na.ssl-images-amazon.com/images/I/5185WS+qmYL._SS400_.jpg",
                link: "https://archive.org/details/everlastingman0000ches_n7k1"
            },
            {
                title: "Confessions",
                author: "Saint Augustine",
                image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRraA_yO778_ithpVdRyJT4KMYml4XiyyrRlw&s",
                link: "https://www.gutenberg.org/files/3296/3296-h/3296-h.htm"
            }
        ];

        // --- Function to Load Books into the Grid ---
        function loadBooks(booksToDisplay) {
            const booksGridContainer = document.getElementById('booksGrid');
            if (!booksGridContainer) return;

            booksGridContainer.innerHTML = ''; // Clear existing content

            if (booksToDisplay.length === 0) {
                booksGridContainer.innerHTML = '<p style="text-align: center; width: 100%; color: var(--text-medium);">No books found matching your search.</p>';
                return;
            }

            booksToDisplay.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.classList.add('book-card');

                bookCard.innerHTML = `
                    <img src="${book.image}" alt="${book.title} Cover" class="book-thumbnail">
                    <h3>${book.title}</h3>
                    <p class="author">${book.author}</p>
                    <a href="${book.link}" class="book-action-btn">View Book</a>
                `;
                booksGridContainer.appendChild(bookCard);
            });

            // Add event listeners for book action buttons
            booksGridContainer.querySelectorAll('.book-action-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const bookTitle = button.closest('.book-card').querySelector('h3').textContent;
                    alert(`Viewing "${bookTitle}" functionality will be available soon!`);
                });
            });
        }

        // --- Search Functionality ---
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const clearSearchButton = document.getElementById('clearSearchButton');

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            let filteredBooks = [];

            if (query === '') {
                filteredBooks = christianBooks; // Show all books if search query is empty
            } else {
                filteredBooks = christianBooks.filter(book => {
                    const titleMatch = book.title.toLowerCase().includes(query);
                    const authorMatch = book.author.toLowerCase().includes(query);
                    return titleMatch || authorMatch;
                });
            }
            loadBooks(filteredBooks); // Load the filtered (or all) books
        }

        if (searchButton) {
            searchButton.addEventListener('click', performSearch);
        }

        if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        if (clearSearchButton) {
            clearSearchButton.addEventListener('click', () => {
                searchInput.value = ''; // Clear the input field
                performSearch(); // Reload all books
            });
        }


        // --- Theme Toggle Functionality ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const mobileThemeToggleBtn = document.getElementById('mobile-theme-toggle');
        const body = document.body;

        const prefersLightMode = window.matchMedia('(prefers-color-scheme: light)');

        function setTheme(isLight) {
            if (isLight) {
                body.classList.add('light-mode');
                themeToggleBtn.textContent = '🌙'; // Moon icon for dark mode toggle
                mobileThemeToggleBtn.textContent = '🌙';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                themeToggleBtn.textContent = '☀️'; // Sun icon for light mode toggle
                mobileThemeToggleBtn.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize theme based on localStorage or system preference
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                setTheme(savedTheme === 'light');
            } else {
                setTheme(false); // Force dark mode if no preference is saved
            }
        }

        // Listen for system theme changes
        prefersLightMode.addEventListener('change', (event) => {
            // Only update if no explicit user preference is saved
            if (!localStorage.getItem('theme')) {
                setTheme(event.matches);
            }
        });

        // Toggle theme on button click
        themeToggleBtn.addEventListener('click', () => {
            setTheme(!body.classList.contains('light-mode'));
        });
        mobileThemeToggleBtn.addEventListener('click', () => {
            setTheme(!body.classList.contains('light-mode'));
        });

        // --- Smooth Scrolling for navigation links (adapted for this page) ---
        document.querySelectorAll('nav a[href^="index.html#"], nav a[href="christian-books-page.html"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                // If it's a link to the current page, allow default behavior
                if (this.getAttribute('href') === 'christian-books-page.html' || this.getAttribute('href').startsWith('#')) {
                    // For dropdowns on mobile, toggle the dropdown
                    if (this.classList.contains('dropdown-btn') && window.innerWidth < 768) {
                        e.preventDefault();
                        const dropdownContent = this.nextElementSibling;
                        const arrowIcon = this.querySelector('.arrow-icon');
                        if (dropdownContent) {
                            dropdownContent.classList.toggle('open-mobile-dropdown');
                            if (arrowIcon) {
                                arrowIcon.style.transform = dropdownContent.classList.contains('open-mobile-dropdown') ? 'rotate(180deg)' : 'rotate(0deg)';
                            }
                        }
                        return; // Don't proceed with page scroll for dropdown toggle
                    }
                    return; // Allow default navigation for direct links on this page or internal anchors
                }

                // For links back to homepage with specific sections
                e.preventDefault();
                const targetHref = this.getAttribute('href');
                window.location.href = targetHref; // Redirect to homepage with hash
            });
        });

        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menuToggle');
        const mobileNavOverlay = document.getElementById('mobileNavOverlay');
        const closeMenuBtn = document.getElementById('closeMenuBtn');

        if (menuToggle && mobileNavOverlay && closeMenuBtn) {
            menuToggle.addEventListener('click', () => {
                mobileNavOverlay.classList.add('open');
                mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                    dropdown.classList.remove('open-mobile-dropdown');
                    const btn = dropdown.previousElementSibling;
                    const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                    if (arrowIcon) {
                        arrowIcon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            closeMenuBtn.addEventListener('click', () => {
                mobileNavOverlay.classList.remove('open');
                mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                    dropdown.classList.remove('open-mobile-dropdown');
                    const btn = dropdown.previousElementSibling;
                    const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                    if (arrowIcon) {
                        arrowIcon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            mobileNavOverlay.querySelectorAll('.mobile-nav-links a:not(.dropdown-btn)').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNavOverlay.classList.remove('open');
                    mobileNavOverlay.querySelectorAll('.dropdown-content.open-mobile-dropdown').forEach(dropdown => {
                        dropdown.classList.remove('open-mobile-dropdown');
                        const btn = dropdown.previousElementSibling;
                        const arrowIcon = btn ? btn.querySelector('.arrow-icon') : null;
                        if (arrowIcon) {
                            arrowIcon.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            });
        }

        // --- Header show/hide on scroll direction (simplified for this page) ---
        const header = document.querySelector('.header');
        // On this page, the header will always be visible, so no complex scroll logic needed.
        // The `header` element will automatically pick up the `background-color` and `box-shadow` from its default style.

        // --- Cookie Consent Banner Logic ---
        const cookieBanner = document.getElementById('cookieConsentBanner');
        const acceptCookiesBtn = document.getElementById('acceptCookiesBtn');
        const cookieConsentKey = 'palLibraryCookieConsent';

        function showCookieBanner() {
            if (!localStorage.getItem(cookieConsentKey)) {
                cookieBanner.classList.add('show');
            }
        }

        function acceptCookies() {
            localStorage.setItem(cookieConsentKey, 'true');
            cookieBanner.classList.remove('show');
        }

        if (acceptCookiesBtn) {
            acceptCookiesBtn.addEventListener('click', acceptCookies);
        }

        // --- Placeholder for Login Button ---
        document.querySelectorAll('.login-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                alert('Login functionality will be available soon!');
            });
        });

        // Initial load of books and theme
        document.addEventListener('DOMContentLoaded', () => {
            initializeTheme();
            loadBooks(christianBooks); // Load all books initially
        });
    </script>
</body>

</html>